<div class="material-form-container">

  <!-- TITLU -->
  <h2>{{ isEditMode ? 'Editează colegul' : 'Adaugă coleg nou' }}</h2>

  <!-- FOTO -->
  <div class="photo-section">

  <div class="photo-wrapper">
    <div class="photo-circle">
      <img *ngIf="previewUrl; else noPhoto" [src]="previewUrl" alt="poza" />
      
      <ng-template #noPhoto>
        <span>Fără poză</span>
      </ng-template>
    </div>

    <button mat-stroked-button color="primary" (click)="triggerPhotoUpload()">
      Încarcă poză
    </button>

    <button 
      mat-stroked-button 
      color="warn" 
      *ngIf="previewUrl" 
      (click)="removePhoto()"
      style="margin-top: 8px;"
    >
      Șterge poza
    </button>

    <input 
      type="file" 
      id="photoUploadInput" 
      hidden 
      (change)="onPhotoSelected($event)"
    >
  </div>
  </div>

  <form class="grid">

    <!-- PerNR -->
    <mat-form-field appearance="outline">
      <mat-label>PerNR</mat-label>
      <input matInput type="number" [(ngModel)]="form.perNr" name="pernr" />
    </mat-form-field>

    <!-- Nume -->
    <mat-form-field appearance="outline">
      <mat-label>Nume *</mat-label>
      <input matInput [(ngModel)]="form.nume" name="nume" required />
    </mat-form-field>

    <!-- Email -->
    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput type="email" [(ngModel)]="form.email" name="email" />
    </mat-form-field>

    <!-- Data angajării -->
    <mat-form-field appearance="outline">
      <mat-label>Data angajării</mat-label>
      <input matInput type="date" [(ngModel)]="form.dataAngajarii" name="ang" />
    </mat-form-field>

    <!-- Data nașterii -->
    <mat-form-field appearance="outline">
      <mat-label>Data nașterii</mat-label>
      <input matInput type="date" [(ngModel)]="form.dataNasterii" name="nastere" />
    </mat-form-field>

    <!-- Gen -->
    <mat-form-field appearance="outline">
      <mat-label>Gen</mat-label>
      <input matInput [(ngModel)]="form.gen" name="gen" />
    </mat-form-field>

    <!-- Oraș -->
    <mat-form-field appearance="outline">
      <mat-label>Oraș</mat-label>
      <input matInput [(ngModel)]="form.oras" name="oras" />
    </mat-form-field>

    <!-- Departament -->
    <mat-form-field appearance="outline">
      <mat-label>Departament</mat-label>
      <input matInput [(ngModel)]="form.departament" name="departament" />
    </mat-form-field>

    <!-- Business Unit -->
    <mat-form-field appearance="outline">
      <mat-label>Business Unit</mat-label>
      <input matInput [(ngModel)]="form.businessUnit" name="bu" />
    </mat-form-field>

    <!-- Normă -->
    <mat-form-field appearance="outline">
      <mat-label>Normă</mat-label>
      <input matInput type="number" [(ngModel)]="form.norma" name="norma" />
    </mat-form-field>

    <!-- FTE -->
    <mat-form-field appearance="outline">
      <mat-label>FTE</mat-label>
      <input matInput type="number" [(ngModel)]="form.fte" name="fte" />
    </mat-form-field>

    <!-- Forma colaborare -->
    <mat-form-field appearance="outline">
      <mat-label>Forma Colaborare</mat-label>
      <input matInput [(ngModel)]="form.formaColaborare" name="forma" />
    </mat-form-field>

    <!-- Tip contract -->
    <mat-form-field appearance="outline">
      <mat-label>Tip Contract</mat-label>
      <input matInput [(ngModel)]="form.tipContract" name="contract" />
    </mat-form-field>

    <!-- Funcție -->
    <mat-form-field appearance="outline">
      <mat-label>Funcție</mat-label>
      <input matInput [(ngModel)]="form.functie" name="functie" />
    </mat-form-field>

    <!-- Drept concediu -->
    <mat-form-field appearance="outline">
      <mat-label>Drept concediu</mat-label>
      <input matInput type="number" [(ngModel)]="form.dreptConcediu" name="dc" />
    </mat-form-field>

    <!-- HR Manager -->
    <mat-form-field appearance="outline">
      <mat-label>HR Manager</mat-label>
      <input matInput [(ngModel)]="form.hrManager" name="hr" />
    </mat-form-field>

    <!-- Project -->
    <mat-form-field appearance="outline">
      <mat-label>Project</mat-label>
      <input matInput [(ngModel)]="form.project" name="project" />
    </mat-form-field>

    <!-- Project Start -->
    <mat-form-field appearance="outline">
      <mat-label>Project Start Date</mat-label>
      <input matInput type="date" [(ngModel)]="form.projectStartDate" name="psd" />
    </mat-form-field>

    <!-- Project End -->
    <mat-form-field appearance="outline">
      <mat-label>Project End Date</mat-label>
      <input matInput type="date" [(ngModel)]="form.projectEndDate" name="ped" />
    </mat-form-field>

    <!-- Client -->
    <mat-form-field appearance="outline">
      <mat-label>Client</mat-label>
      <input matInput [(ngModel)]="form.client" name="client" />
    </mat-form-field>

    <!-- Project Manager -->
    <mat-form-field appearance="outline">
      <mat-label>Project Manager</mat-label>
      <input matInput [(ngModel)]="form.projectManager" name="pm" />
    </mat-form-field>

    <!-- Germana -->
    <mat-form-field appearance="outline">
      <mat-label>Germană</mat-label>
      <mat-select [(ngModel)]="form.german" name="german">
        <mat-option *ngFor="let level of germanLevels" [value]="level">
          {{ level }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Engleză -->
    <mat-form-field appearance="outline">
      <mat-label>Engleză</mat-label>
      <mat-select [(ngModel)]="form.english" name="english">
        <mat-option *ngFor="let level of englishLevels" [value]="level">
          {{ level }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- G-Level -->
    <mat-form-field appearance="outline">
      <mat-label>G-Level</mat-label>
      <mat-select [(ngModel)]="form.gLevel" name="glevel">
        <mat-option *ngFor="let level of glevels" [value]="level">
          {{ level }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Skills -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Skills</mat-label>
      <input matInput [(ngModel)]="form.skills" name="skills" />
    </mat-form-field>

  </form>

  <div class="buttons">
    <button mat-flat-button color="primary" (click)="submit()">
      {{ isEditMode ? 'Salvează' : 'Adaugă coleg' }}
    </button>

    <button mat-stroked-button color="warn" (click)="cancel.emit()">
      Renunță
    </button>
  </div>
</div>
