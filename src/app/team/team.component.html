<div class="container-fluid px-4 my-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Lista colegilor</h2>

        <button class="btn btn-success btn-sm" *ngIf="!showAddForm && !showEditForm" (click)="showAddForm = true">
          + Adaugă coleg
        </button>
    </div>

    <div *ngIf="showAddForm" class="mb-section">
      <div class="card shadow-sm">
        <div class="card-body">
          <app-member-form
            (save)="addMember($event)"
            (cancel)="showAddForm = false">
          </app-member-form>
        </div>
      </div>
    </div>

  <div *ngIf="!showAddForm && members.length > 0" class="card shadow-sm mb-section">
    <div class="card-body p-0">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>PerNR</th>
            <th>Nume</th>
            <th>Email</th>
            <th class="text-end">Acțiuni</th>
          </tr>
        </thead>

        <tbody>
          <ng-container *ngFor="let m of members; let i = index">  
            <tr>
              <td (click)="selectMember(m, i)" style="cursor:pointer;">{{ m.perNr || '-' }}</td>
              <td (click)="selectMember(m, i)" style="cursor:pointer;">{{ m.nume }}</td>
              <td (click)="selectMember(m, i)" style="cursor:pointer;">{{ m.email || '-' }}</td>

              <td class="text-end">

              <button class="btn btn-primary btn-sm me-1" (click)="onEditMember(m, $event)">Editează</button>
              <button class="btn btn-danger btn-sm me-1" (click)="onDeleteMember(i, $event)">Șterge</button> 
              <button class="btn btn-outline-success btn-sm" (click)="onAddDiscussionFromTable(m, $event)">Discuție nouă</button>

              </td>
            </tr>

            <tr *ngIf="selectedIndex === i && !showEditForm">
              <td colspan="4">
                <app-member-details [member]="m"></app-member-details>
              </td>
            </tr>

            <tr *ngIf="selectedIndex === i && showEditForm">
              <td colspan="4">
                <div class="card shadow-sm p-3">
                  <app-member-form
                    [member]="editTarget!"
                    (save)="onSaveEdit($event)"
                    (cancel)="onCancelEdit()">
                  </app-member-form>
                </div>
              </td>
            </tr>

          </ng-container>
        </tbody>
      </table>
    </div>
  </div> 

    <p *ngIf="members.length === 0">
      Nu există colegi încă.
    </p>
  </div>

